(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[508],{6647:function(){},8821:function(e,t,a){Promise.resolve().then(a.bind(a,7124))},7124:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var n=a(7437),o=a(2265),s=a(1444),l=a(6463),r=a(2126),i=a(1269),c=a(3580),u=a(6648),d=a(1525),h=a(6824),g=a(5871),p=a(4430);function m(){let e=(0,s.I0)(),t=(0,l.useRouter)(),{id:a}=(0,l.useParams)(),[m,f]=(0,o.useState)(a||"1");(0,s.v9)(e=>e.auth.isUserLoggedIn);let[v,b]=(0,o.useState)(null);(0,o.useEffect)(()=>{console.log({id:a}),f(a||"1")},[a]);let w=()=>{v&&clearTimeout(v)},y=async()=>{if(void 0!==window.ethereum)try{let m=new i.Q(window.ethereum),f=await m.getNetwork(),v=BigInt(f.chainId),b=BigInt(h.W.chainId);if(v!==b)console.log("Please switch to the correct network"),await window.ethereum.request({method:"wallet_addEthereumChain",params:[h.W]});else{await m.send("eth_requestAccounts",[]);let i=await m.getSigner();console.log(i);let h=await i.getAddress(),f=await r.Z.get("http://localhost:3333/api/auth/pubKey/".concat(h,"/rid/").concat(a)),v=await i.signMessage(f.data.data.nonce),b=await r.Z.post("http://localhost:3333/api/auth/verify",{pubKey:h,signature:v});if(b.data.data.verified){var n,o,s,l,u;e((0,d.x4)({user:b.data.data.user,token:b.data.data.access_token}));let a=g.v.userMineGlobalApiUrl+"/"+(null==b?void 0:null===(s=b.data)||void 0===s?void 0:null===(o=s.data)||void 0===o?void 0:null===(n=o.user)||void 0===n?void 0:n.uid),i={headers:{Authorization:"Bearer ".concat(null==b?void 0:null===(u=b.data)||void 0===u?void 0:null===(l=u.data)||void 0===l?void 0:l.access_token),"Content-Type":"application/json"}},h=(await r.Z.get(a,i)).data.data.globalData;e((0,p.BR)({globalData:h})),w(),t.push("/dashboard"),c.Am.success("Login successful!")}else c.Am.error("Login verification failed.")}}catch(e){console.error("Error during login process:",e),"ACTION_REJECTED"===e.code?c.Am.error("Login request was rejected."):c.Am.error("Error during login process.")}else c.Am.error("MetaMask is not installed. Please consider installing it: https://metamask.io/download.html")};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"df ac jc",style:{height:"100%"},children:(0,n.jsx)("div",{className:"dg ac jc  ",children:(0,n.jsxs)("div",{className:" ",children:[(0,n.jsx)(u.default,{src:"/assets/nlogo2.png",width:300,height:300,alt:"Logo",priority:!0,className:"mt--50 "}),(0,n.jsx)("div",{className:"df ac jc",children:(0,n.jsx)("div",{className:" df jc ac w-[40%] h-10 rounded-lg neon-red text-yellow-50 hover:cursor-pointer",onClick:y,children:"Enter"})})]})})})})}a(9930).config()},1525:function(e,t,a){"use strict";a.d(t,{kS:function(){return s},x4:function(){return o}});let n=(0,a(9753).oM)({name:"auth",initialState:{isUserLoggedIn:!1,user:null,token:null},reducers:{login:(e,t)=>{e.isUserLoggedIn=!0,e.user=t.payload.user,e.token=t.payload.token,localStorage.setItem("auth",JSON.stringify({isUserLoggedIn:!0,user:t.payload.user,token:t.payload.token}))},updateUser:(e,t)=>{if(e.user){e.user={...e.user,...t.payload};let a=localStorage.getItem("auth");if(a){let e=JSON.parse(a);localStorage.setItem("auth",JSON.stringify({...e,user:{...e.user,...t.payload}}))}}},logout:e=>{e.isUserLoggedIn=!1,e.user=null,e.token=null,localStorage.removeItem("auth")}}}),{login:o,logout:s,updateUser:l}=n.actions;t.ZP=n.reducer},4430:function(e,t,a){"use strict";a.d(t,{BR:function(){return o}});let n=(0,a(9753).oM)({name:"globalData",initialState:{globalData:null},reducers:{changeGlobalData:(e,t)=>{e.globalData=t.payload.globalData,localStorage.setItem("global",JSON.stringify({globalData:t.payload.globalData}))}}}),{changeGlobalData:o}=n.actions;t.ZP=n.reducer},6824:function(e,t,a){"use strict";a.d(t,{W:function(){return o},n:function(){return n}});let n={chainId:"0x61",chainName:"Binance Smart Chain Testnet",nativeCurrency:{name:"Binance Coin",symbol:"BNB",decimals:18},rpcUrls:["https://data-seed-prebsc-1-s1.binance.org:8545"],blockExplorerUrls:["https://testnet.bscscan.com/"]},o={chainId:"0x38",chainName:"Binance Smart Chain Mainnet",nativeCurrency:{name:"Binance Coin",symbol:"BNB",decimals:18},rpcUrls:["https://bsc-dataseed.binance.org/"],blockExplorerUrls:["https://bscscan.com/"]}},5871:function(e,t,a){"use strict";a.d(t,{v:function(){return n}}),a(9930).config();let n={baseUrl:"http://localhost:3030",apiBaseUrl:"http://localhost:3333/api",mineApiUrl:"http://localhost:3333/api/mine",userMineGlobalApiUrl:"http://localhost:3333/api/users/mine/global"}}},function(e){e.O(0,[218,335,652,648,971,23,744],function(){return e(e.s=8821)}),_N_E=e.O()}]);