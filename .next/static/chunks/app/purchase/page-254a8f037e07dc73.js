(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{6647:function(){},8504:function(e,t,a){Promise.resolve().then(a.bind(a,1672))},1672:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var s=a(7437),i=a(2265),n=a(2126),l=a(1269),r=a(1581),o=a(5871),c=a(1444),d=a(6463),u=a(7138),h=a(1525),m=a(3580);function p(){let e=(0,c.I0)(),t=(0,d.useRouter)(),a="/"+(0,d.usePathname)().split("/")[1],[n,l]=(0,i.useState)(!1),r=[{path:"/dashboard",icon:"fa fa-home mb--20",label:"Dashboard"},{path:"/purchase",icon:"fa fa-shopping-cart  mb--20",label:"Purchases"},{path:"/withdrawals",icon:"fa fa-arrow-up mb--20",label:"Withdrawals"},{path:"/settings",icon:"fa fa-cog mb--20",label:"Settings"},{path:"/auth",icon:"fa fa-power-off mb--20",label:"Logout"}],o=e=>a===e,p=()=>{e((0,h.kS)()),t.push("/auth"),m.Am.success("You have been logged out successfully.")},f=()=>l(!n);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"hamburger mb20",onClick:f,children:(0,s.jsx)("i",{className:"fa fa-bars c-white"})}),(0,s.jsxs)("div",{className:n?"mobile-menu open":"mobile-menu",children:[(0,s.jsx)("i",{className:"fa fa-times close-icon",onClick:f})," ",r.map((e,t)=>(0,s.jsx)("div",{onClick:()=>{f(),"/auth"===e.path&&p()},children:(0,s.jsx)(u.default,{href:e.path,children:(0,s.jsx)("div",{className:"icon-label-container mb20",children:(0,s.jsx)("div",{className:"icon-holder ".concat(o(e.path)?"active":""),children:(0,s.jsx)("i",{className:"".concat(e.icon," fs30")})})})})},t))]}),(0,s.jsx)("div",{className:"icon-column col-md-1",children:(0,s.jsx)("div",{className:"icon-navigation",children:r.map((e,t)=>(0,s.jsx)("div",{onClick:"/auth"===e.path?p:null,children:(0,s.jsx)(u.default,{href:e.path,children:(0,s.jsx)("div",{className:"icon-holder ".concat(o(e.path)?"active":""),children:(0,s.jsx)("i",{className:e.icon})})})},t))})})]})}var f=function(e){let{firstWord:t,secondWord:a}=e;return(0,s.jsxs)("div",{className:"ffp text-2xl ml--40 fw700 c-p",children:[t," ",(0,s.jsx)("span",{className:"c-s",children:a})]})};let x=[{id:1,name:"Mini",price:.99,rolls:50,rollType:"per pack",currency:"USD",description:"Mini Pack"},{id:2,name:"Maxi",price:2.99,rolls:10,rollType:"per day",currency:"USD",description:"Maxi Pack"}],g=[{id:"1",title:"Mini",description:"50 rolls per pack",price:"0.99"},{id:"2",title:"Maxi",description:"10 rolls per day",price:"2.99"}];var v=a(6262);function b(e){let{address:t,size:a}=e;return(0,s.jsx)(v.Z,{seed:t.toLowerCase(),size:8,scale:a/8,className:"rounded-full"})}var N=function(){let e=(0,c.v9)(e=>e.auth.isUserLoggedIn),t=(0,c.v9)(e=>e.auth.user),a=(null==t?void 0:t.pubKey)||"",[n,l]=(0,i.useState)(window.innerWidth>=1024?56:28);return(0,i.useEffect)(()=>{function e(){l(window.innerWidth>=1024?56:28)}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,s.jsxs)("div",{className:"bg-inherit p-4 flex justify-between items-center text-white",children:[(0,s.jsx)("img",{src:"/assets/nlogo2.png",alt:"Logo",className:"w-14 h-14 lg:w-28 lg:h-28"}),e&&(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-gray-200 font-semibold mr-2",children:"0xâ€¦".concat(a.substring(a.length-4))}),(0,s.jsx)(b,{address:a,size:n})]})]})},w=function(){let e,t,a;(0,d.useRouter)();let[u,v]=(0,i.useState)(x),[b,w]=(0,i.useState)(0),[j,y]=(0,i.useState)(0),[S,k]=(0,i.useState)(!1),[U,F]=(0,i.useState)("0xee7F9d4af4Ce44b609b88E45D04F0564a5e229c3"),[P,I]=(0,i.useState)(600),[B,C]=(0,i.useState)("ethereum");(0,i.useEffect)(()=>{e=(0,c.v9)(e=>e.auth.isUserLoggedIn),t=(0,c.v9)(e=>e.auth.user),a=(0,c.v9)(e=>e.auth.token),e&&t||(console.log("User not logged in or user data not available, redirecting..."),(0,h.kS)(),m.Am.error("Please login to continue."))},[e,t]);let A=async()=>{try{let e=["https://api.binance.com/api/v3/ticker/price?symbol=BNBUSDT"].map(e=>n.Z.get(e)),t=await Promise.all(e),a=[];a.push(parseFloat(t[0].data.price)),console.log({prices:a});let s=a.reduce((e,t)=>e+t,0)/a.length;console.log({averagePrice:s}),I(.97*s)}catch(e){console.error("Failed to fetch BNB prices:",e)}};(0,i.useEffect)(()=>{A();let e=setInterval(A,6e3);return k(!1),()=>clearInterval(e)},[]);let E=async(e,s,i)=>{m.Am.info("Processing transaction...");let c={headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}},d="".concat(o.v.apiBaseUrl,"/packPurchases"),u="".concat(o.v.apiBaseUrl,"/deposits");if(!window.ethereum){m.Am.error("Please install / use web3 supported platform to proceed.");return}try{let a=new l.Q(window.ethereum);await a.send("eth_requestAccounts",[]);let o=await a.getSigner(),h=await o.getAddress(),p=await a.getBalance(h),f=r.dF(p);if(parseFloat(f)<parseFloat(e)){m.Am.error("Insufficient balance to proceed with the transaction.");return}let x={to:U,from:h,value:r.vz(e,"ether").toString()},g=await o.sendTransaction(x);await g.wait(3);let v={uid:null==t?void 0:t.uid,numberOfPacks:"1"===i?b:j,packName:"1"===i?"mini":"maxi",status:"active",lastUpdatedUid:null==t?void 0:t.uid},N={uid:null==t?void 0:t.uid,address:U,amount:parseFloat(e),network:"BSC",currency:"BNB",usdValue:parseFloat(s),txnHash:g.hash,status:"active",lastUpdatedUid:null==t?void 0:t.uid};await n.Z.post(d,v,c),await n.Z.post(u,N,c),m.Am.info("Purchase successful!  ")}catch(e){console.error(e.code),"ACTION_REJECTED"===e.code?m.Am.error("Transaction rejected by user: Please try again"):m.Am.error("Transaction failed: Please try later")}},T=[1,5,20,50,100,0];function L(e){let t=parseInt(e.target.value);w(isNaN(t)?0:t)}function M(e){let t=parseInt(e.target.value);y(isNaN(t)?0:t)}return(0,s.jsxs)("div",{className:"dashboard-container",children:[(0,s.jsx)(N,{}),(0,s.jsxs)("div",{className:"dashboard-section",children:[(0,s.jsx)(p,{}),(0,s.jsxs)("div",{className:"stat-container text-white",children:[(0,s.jsx)("div",{className:"df ac jc mb30",children:(0,s.jsx)(f,{firstWord:"MORE WITH",secondWord:"UPGRADES"})})," ",(0,s.jsx)("div",{className:"flex flex-col-reverse lg:flex lg:flex-row-reverse lg:place-content-evenly",children:g.map(e=>(0,s.jsxs)("div",{className:"w-[22rem] max-lg:w-full h-full px-6 bg-n-8 border border-n-6 rounded-[2rem]  py-10 my-4 lg:p-10 lg:m-10 ",children:[(0,s.jsx)("h4",{className:"h4 mb-4 font-bold",style:{color:"1"===e.id?"#FF5733":"#33C3F0"},children:e.title}),(0,s.jsx)("p",{className:"body-2 min-h-[4rem] mb-3 text-n-1/50",children:e.description}),(0,s.jsx)("div",{className:"flex items-center h-[5.5rem] mb-6",children:(null==e?void 0:e.price)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"h3",children:"$"}),(0,s.jsx)("div",{className:"text-[5.5rem] leading-none font-bold",children:null==e?void 0:e.price})]})}),(0,s.jsx)("input",{type:"number",min:"0",value:"1"===e.id?b:j,onChange:"1"===e.id?L:M,className:"bg-gray-700 text-white text-center rounded-2 py-2 mt-2 w-full"}),(0,s.jsx)("div",{className:"c-gray fs15 pt-4 df ac jc lg:flex",children:T.map((t,a)=>(0,s.jsx)("button",{onClick:a=>{a.preventDefault(),function(e,t){if(0===t){w(0),y(0);return}"mini"===e?w(e=>Math.max(0,e+t)):"maxi"===e&&y(e=>Math.max(0,e+t))}("1"===e.id?"mini":"maxi",t)},className:"pt-2 px-2 py-1 mx-2 bg-green-700 text-white rounded-md font-semibold last:bg-red-700 last:text-white last:rounded-md",children:0===t?"R":"+".concat(t)},a))}),(0,s.jsx)("button",{className:"w-full my-6 py-3 bg-purple-800 rounded-md font-semibold font-sans",onClick:()=>{E("1"===e.id?(b*(null==e?void 0:e.price)/P).toFixed(5):(j*(null==e?void 0:e.price)/P).toFixed(5),"1"===e.id?(b*(null==e?void 0:e.price)).toFixed(2):(j*(null==e?void 0:e.price)).toFixed(2),e.id)},children:0===b&&0===j?"Pay":"1"===e.id?0===b?"Pay":"Pay ".concat((b*(null==e?void 0:e.price)/P).toFixed(5)," BNB (").concat((b*(null==e?void 0:e.price)).toFixed(2)," USDT)"):0===j?"Pay":"Pay ".concat((j*(null==e?void 0:e.price)/P).toFixed(5)," BNB (").concat((j*(null==e?void 0:e.price)).toFixed(2)," USDT)")})]},e.id))})]})]})]})}},1525:function(e,t,a){"use strict";a.d(t,{kS:function(){return n},x4:function(){return i}});let s=(0,a(9753).oM)({name:"auth",initialState:{isUserLoggedIn:!1,user:null,token:null},reducers:{login:(e,t)=>{e.isUserLoggedIn=!0,e.user=t.payload.user,e.token=t.payload.token,localStorage.setItem("auth",JSON.stringify({isUserLoggedIn:!0,user:t.payload.user,token:t.payload.token}))},updateUser:(e,t)=>{if(e.user){e.user={...e.user,...t.payload};let a=localStorage.getItem("auth");if(a){let e=JSON.parse(a);localStorage.setItem("auth",JSON.stringify({...e,user:{...e.user,...t.payload}}))}}},logout:e=>{e.isUserLoggedIn=!1,e.user=null,e.token=null,localStorage.removeItem("auth")}}}),{login:i,logout:n,updateUser:l}=s.actions;t.ZP=s.reducer},5871:function(e,t,a){"use strict";a.d(t,{v:function(){return s}}),a(9930).config();let s={baseUrl:"http://localhost:3030",apiBaseUrl:"http://localhost:3333/api",mineApiUrl:"http://localhost:3333/api/mine",userMineGlobalApiUrl:"http://localhost:3333/api/users/mine/global"}}},function(e){e.O(0,[218,335,652,138,236,971,23,744],function(){return e(e.s=8504)}),_N_E=e.O()}]);