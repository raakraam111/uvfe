(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{6647:function(){},3524:function(e,t,a){Promise.resolve().then(a.bind(a,2365))},2365:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var n=a(7437),s=a(1444),r=a(1269),o=a(2265),i=a(2126),l=a(3580),c=a(6648),u=a(6463),d=a(6824),g=a(1525),h=a(4430);function m(){let e=(0,s.I0)(),t=(0,u.useRouter)(),a=(0,s.v9)(e=>e.auth.isUserLoggedIn),[m,f]=(0,o.useState)(null),p=()=>{m&&clearTimeout(m),f(setTimeout(w,9e5))},w=()=>{e((0,g.kS)()),m&&clearTimeout(m),t.push("/auth")};(0,o.useEffect)(()=>{a||w()},[a]);let b=async()=>{if(void 0!==window.ethereum)try{let a=new r.Q(window.ethereum),n=await a.getNetwork();d.W.chainId;let s=BigInt(n.chainId),o=BigInt(d.W.chainId);if(s!==o)console.log("Please switch to the correct network"),await window.ethereum.request({method:"wallet_addEthereumChain",params:[d.W]});else{await a.send("eth_requestAccounts",[]);let n=await a.getSigner();console.log(n);let s=await n.getAddress(),r=await i.Z.get("http://localhost:3333/api/auth/pubKey/".concat(s,"/rid/1")),o=await n.signMessage(r.data.data.nonce),c=await i.Z.post("http://localhost:3333/api/auth/verify",{pubKey:s,signature:o});c.data.data.verified?(e((0,g.x4)({user:c.data.data.user,token:c.data.data.access_token})),e((0,h.BR)({globalData:c.data.data.globalData})),p(),t.push("/dashboard"),l.Am.success("Login successful!")):l.Am.error("Login failed. Please try again.")}}catch(e){"ACTION_REJECTED"===e.code?l.Am.error("Login request was rejected."):l.Am.error("Error during login process.")}else l.Am.error("MetaMask is not installed. Please consider installing it: https://metamask.io/download.html")};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"df ac jc",style:{height:"100%"},children:(0,n.jsx)("div",{className:"dg ac jc  ",children:(0,n.jsxs)("div",{className:" ",children:[(0,n.jsx)(c.default,{src:"/assets/nlogo2.png",width:300,height:300,alt:"Logo",priority:!0,className:"mt--50 "}),(0,n.jsx)("div",{className:"df ac jc",children:(0,n.jsx)("div",{className:" df jc ac w-[40%] h-10 rounded-lg neon-red text-yellow-50 hover:cursor-pointer",onClick:b,children:"Enter"})})]})})})})}a(9930).config()},1525:function(e,t,a){"use strict";a.d(t,{kS:function(){return r},x4:function(){return s}});let n=(0,a(9753).oM)({name:"auth",initialState:{isUserLoggedIn:!1,user:null,token:null},reducers:{login:(e,t)=>{e.isUserLoggedIn=!0,e.user=t.payload.user,e.token=t.payload.token,localStorage.setItem("auth",JSON.stringify({isUserLoggedIn:!0,user:t.payload.user,token:t.payload.token}))},updateUser:(e,t)=>{if(e.user){e.user={...e.user,...t.payload};let a=localStorage.getItem("auth");if(a){let e=JSON.parse(a);localStorage.setItem("auth",JSON.stringify({...e,user:{...e.user,...t.payload}}))}}},logout:e=>{e.isUserLoggedIn=!1,e.user=null,e.token=null,localStorage.removeItem("auth")}}}),{login:s,logout:r,updateUser:o}=n.actions;t.ZP=n.reducer},4430:function(e,t,a){"use strict";a.d(t,{BR:function(){return s}});let n=(0,a(9753).oM)({name:"globalData",initialState:{globalData:null},reducers:{changeGlobalData:(e,t)=>{e.globalData=t.payload.globalData,localStorage.setItem("global",JSON.stringify({globalData:t.payload.globalData}))}}}),{changeGlobalData:s}=n.actions;t.ZP=n.reducer},6824:function(e,t,a){"use strict";a.d(t,{W:function(){return s},n:function(){return n}});let n={chainId:"0x61",chainName:"Binance Smart Chain Testnet",nativeCurrency:{name:"Binance Coin",symbol:"BNB",decimals:18},rpcUrls:["https://data-seed-prebsc-1-s1.binance.org:8545"],blockExplorerUrls:["https://testnet.bscscan.com/"]},s={chainId:"0x38",chainName:"Binance Smart Chain Mainnet",nativeCurrency:{name:"Binance Coin",symbol:"BNB",decimals:18},rpcUrls:["https://bsc-dataseed.binance.org/"],blockExplorerUrls:["https://bscscan.com/"]}}},function(e){e.O(0,[218,335,652,648,971,23,744],function(){return e(e.s=3524)}),_N_E=e.O()}]);